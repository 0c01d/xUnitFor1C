
//{ основная процедура для юнит-тестирования 1CUnit
Перем _тестируем; // для тестирования
Перем юТест;

Функция ПолучитьСписокТестов(ЮнитТестирование) Экспорт
	
	юТест = ЮнитТестирование;
	
	ВсеТесты = Новый Массив;
	
	//юТест.ДобавитьПростыеТестыИзОбъекта(ВсеТесты, ЭтотОбъект);
			//ВсеТесты.Добавить("ТестДолжен_");
				
			//параметрыТеста = Новый Структура("ВерсияПлатформы,путь1С,Транзакция", "8.3.3.641", "C:\Program Files (x86)\1cv8\8.3.3.641\bin\1cv8.exe",Истина);
			//описаниеТеста = Новый Структура("ИмяТеста,Параметр", "ОТест_ОпределитьПравильныйПутьКПлатформеПоВерсииПлатформы", параметрыТеста);
			//ВсеТесты.Добавить(описаниеТеста);

	ВсеТесты.Добавить("ТестДолжен_ПолучитьМакетДляПростойСправочник");

	Возврат ВсеТесты;
	
КонецФункции
//}

//{ ОСНОВНОЙ БЛОК
Функция МакетДляГенерацииДанных(МассивДанных) Экспорт
	Возврат Новый  ТабличныйДокумент;
КонецФункции

//} КОНЕЦ ОСНОВНОГО БЛОКА

//{ БЛОК ЮНИТ-ТЕСТОВ - сами тесты

Процедура ПередЗапускомТеста() Экспорт
	НачатьТранзакцию();
КонецПроцедуры

Процедура ПослеЗапускаТеста() Экспорт
	Если ТранзакцияАктивна() Тогда
		ОтменитьТранзакцию();
	КонецЕсли;	
КонецПроцедуры


Процедура ТестДолжен_ПолучитьМакетДляПростойСправочник() Экспорт
	Макет = ПолучитьМакет("СозданиеПростогоСправочника");
	ТестовыеДанные = юТест.СоздатьДанныеПоТабличномуДокументу(Макет);
		
	Отбор = Новый Структура("Наименование,РеквизитБулево", "Тестовое наименование", Истина);
	
	КоличествоДо = юТест.ПолучитьКоличествоЭлементовСправочникаПоОтбору("ПростойСправочник", Отбор);
		юТест.ПроверитьРавенство(1, количествоДо, "количествоДо");
		
	описаниеЭлемента = Новый Структура("Ссылка", ТестовыеДанные.ПростойСправочник);
	МассивДанных = Новый Массив;
	МассивДанных.Добавить(описаниеЭлемента);
		
	НовыйМакет = ЭтотОбъект.МакетДляГенерацииДанных(массивДанных);
	
	ТестовыеДанные.ПростойСправочник.ПолучитьОбъект().Удалить();
		юТест.ПроверитьРавенство(0, артТесты.ПолучитьКоличествоЭлементовСправочникаПоОтбору("ПростойСправочник", Отбор), "количество после удаления");
	
	ТестовыеДанные = юТест.СоздатьДанныеПоТабличномуДокументу(НовыйМакет);
	
	//Сообщить(Код1С);
	//Выполнить(Код1С);
	
	КоличествоПосле = артТесты.ПолучитьКоличествоЭлементовСправочникаПоОтбору("ПростойСправочник", Отбор);
		юТест.ПроверитьРавенство(КоличествоПосле, КоличествоДо, "КоличествоПосле, КоличествоДо");
КонецПроцедуры

_тестируем = Ложь;

//} КОНЕЦ БЛОКА ЮНИТ-ТЕСТОВ